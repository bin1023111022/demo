package com.citic;

import java.net.Socket;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class SocketTest {
	
	public static Logger logger = LoggerFactory.getLogger(SocketTest.class);
	
	static String purchase = "303336362E02303336363034333834353330202020303030313030303020202043555001303030303030303000303030303030323130F23E42818AC0821000000000100000C1313936323132313432303030303030303030303132303030303030303030303030303038303030303731333033353032313030313038353033353032313037313332393132303731333439303030303030303038303433383435333030383034333834353330313630373133383639363732303031303030303134373830313030303934393030303030313135363033369F3602005F910ADB36C7740564A62C30307211860F04DA9F790A0000000500004CB485683033303030303030363030303330303030303030303030303031323130313030303038393230393030303030343335313453323230303030303435393230393030303020202030303030303030303030303030303030303030303139303136463132326163715F72657365727665643836373233453836";
	static String purchase1 = "303336362E02303336363034333834353330202020303030313030303020202043555001303030303030303000303030303030323130F23E42818AC0821000000000100000C1313936323132313432303030303030303030303132303030303030303030303030303038303030303731333033353032313030313038353033353032313037313332393132303731333439303030303030303038303433383435333030383034333834353330313630373133383639363732303031303030303134373830313030303934393030303030313135363033369F3602005F910ADB36C7740564A62C30307211860F04DA9F790A0000000500004CB485683033303030303030363030303330303030303030";
	static String purchase2 = "30303030303132313031303030303839323039";
	static String purchase3 = "3030303030343335313453323230303030303435393230393030303020202030303030303030303030303030303030303030303139303136463132326163715F72657365727665643836373233453836";
	static String aa = "008A600006000060310032007204007024068002c08211196212142000000000012000000000000000011100117629120510000000303631303030303134373830313030303934393030303030313135360040950508800470009f1e0838383434373034369f101307010103a02010010a0100000500004707a18d0014220000010006014543454234394139";
//	static String aa = "0039600254000060310031192200000000000000000000000000000000000000000900000000020000001051535948303030310011000000019010";
//	static String aa ="012f6000060000603100010101000000000000000000000000000000000000000002007020068220c09a11196231190153300279041000000000000000000100012905100010005153594830303031376231190153300279041d24122207673140100030313030303636383837303436333035393437303030313135366315D59B2BA7AB7A260000000000000001459f2608d3c58c99e17424139f2701809f101307050103a02000010a0100000000492e40d7f29f3704e847e7c19f360200ad950508000470009a031610289c01009f02060000000000015f2a02015682027c009f1a0201569f03060000000000009f3303e0e1c89f34030203009f3501229f1e0838393636313530388408a0000003330101019f090200209f4104000001290014220000010006014137334542384535";
	static int errorCount = 0;
	static Integer count = 0;
	public static void sendData(String[] address) throws Exception {
		SocketTest.logger.debug("-----debug-----");
		SocketTest.logger.info("-----info-----");
		SocketTest.logger.warn("-----warm----");
		SocketTest.logger.error("-----error------");
		String host = address[0];
		int port = Integer.valueOf(address[1]);
		Socket s = new Socket(host, port);
		s.setSoTimeout(60*1000);  
		s.getOutputStream().write(BcdUtils.str2Bcd(aa));
//        s.getOutputStream().write(BcdUtils.str2Bcd(purchase2));
//        s.getOutputStream().write(BcdUtils.str2Bcd(purchase3));
//		s.getOutputStream().write(unLogin.getBytes());
        byte[] ret = new byte[2];
        int n = s.getInputStream().read(ret,0,2);    
        String len =BcdUtils.bcd2Str(ret);//"009F";//
        int leni = Integer.parseInt(len,16);
        byte[] ret2 = new byte[leni];
        int t = s.getInputStream().read(ret2);
        String std = BcdUtils.bcd2Str(ret2);
        System.out.println("-------------------------");
        System.out.println(std);
        System.out.println("-------------------------");
        s.close();
        count++;
    }
	public static void main(String[] args) throws Exception { 
		System.out.println("开始发送");
		String [] address = {"58.56.23.89","6665"};//易通测试平台
		String [] address1 = {"192.168.1.110","555"};
		String [] address2 = {"10.1.9.155","5555"};
		String [] address3 = {"127.0.0.1","5555"};
		String [] address4 = {"192.168.1.90","6666"};
		String [] address5 = {"10.1.9.110","5555"};
		sendData(address2);
	}
}
